(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f27f5ea4"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"2c2e":function(e,t,r){"use strict";r.r(t);r("ac1f"),r("841c");var o=r("7a23"),a=Object(o["createTextVNode"])("首页"),n=Object(o["createTextVNode"])("信息管理"),l=Object(o["createTextVNode"])("报修信息"),i={style:{margin:"10px 0"}},c={style:{margin:"10px 0"}},d={style:{float:"right"}},u={style:{margin:"10px 0"}},s=Object(o["createTextVNode"])("完成"),b=Object(o["createTextVNode"])("未完成"),m={class:"dialog-footer"},f=Object(o["createTextVNode"])("取 消"),p=Object(o["createTextVNode"])("确 定"),h=["innerHTML"],j={class:"dialog-footer"},O=Object(o["createTextVNode"])("确 定");function g(e,t,r,g,V,x){var C=Object(o["resolveComponent"])("el-breadcrumb-item"),w=Object(o["resolveComponent"])("el-breadcrumb"),N=Object(o["resolveComponent"])("el-input"),v=Object(o["resolveComponent"])("el-button"),y=Object(o["resolveComponent"])("el-tooltip"),T=Object(o["resolveComponent"])("el-table-column"),k=Object(o["resolveComponent"])("el-tag"),_=Object(o["resolveComponent"])("el-popconfirm"),D=Object(o["resolveComponent"])("el-table"),z=Object(o["resolveComponent"])("el-pagination"),S=Object(o["resolveComponent"])("el-form-item"),E=Object(o["resolveComponent"])("el-radio"),B=Object(o["resolveComponent"])("el-date-picker"),I=Object(o["resolveComponent"])("el-form"),R=Object(o["resolveComponent"])("el-dialog"),U=Object(o["resolveComponent"])("el-card"),F=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(w,{"separator-icon":"ArrowRight",style:{margin:"16px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{to:{path:"/home"}},{default:Object(o["withCtx"])((function(){return[a]})),_:1}),Object(o["createVNode"])(C,null,{default:Object(o["withCtx"])((function(){return[n]})),_:1}),Object(o["createVNode"])(C,null,{default:Object(o["withCtx"])((function(){return[l]})),_:1})]})),_:1}),Object(o["createVNode"])(U,{style:{margin:"15px","min-height":"calc(100vh - 111px)"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",c,[Object(o["createVNode"])(N,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.search=t}),clearable:"",placeholder:"请输入标题","prefix-icon":"Search",style:{width:"20%"}},null,8,["modelValue"]),Object(o["createVNode"])(v,{icon:"Search",style:{"margin-left":"5px"},type:"primary",onClick:e.load},null,8,["onClick"]),Object(o["createVNode"])(v,{icon:"refresh-left",style:{"margin-left":"10px"},type:"default",onClick:e.reset},null,8,["onClick"]),Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(y,{content:"添加",placement:"top"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{icon:"plus",style:{width:"50px"},type:"primary",onClick:e.add},null,8,["onClick"])]})),_:1})])])]),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(D,{data:e.tableData,border:"","max-height":"705",style:{width:"100%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(T,{label:"#",type:"index"}),Object(o["createVNode"])(T,{"show-overflow-tooltip":!0,label:"标题",prop:"title"}),Object(o["createVNode"])(T,{label:"宿舍号",prop:"dormBuildId",sortable:"",width:"150px"}),Object(o["createVNode"])(T,{label:"房间号",prop:"dormRoomId",sortable:"",width:"150px"}),Object(o["createVNode"])(T,{label:"申请人",prop:"repairer",width:"150px"}),Object(o["createVNode"])(T,{"filter-method":e.filterTag,filters:[{text:"完成",value:"完成"},{text:"未完成",value:"未完成"}],"filter-placement":"bottom-end",label:"订单状态",prop:"state",sortable:""},{default:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(k,{type:"完成"===e.row.state?"success":"info","disable-transitions":""},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.row.state),1)]})),_:2},1032,["type"])]})),_:1},8,["filter-method"]),Object(o["createVNode"])(T,{label:"订单创建时间",prop:"orderBuildTime",sortable:""}),Object(o["createVNode"])(T,{label:"订单完成时间",prop:"orderFinishTime",sortable:""}),Object(o["createVNode"])(T,{label:"操作",width:"190px"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(v,{icon:"more-filled",type:"default",onClick:function(r){return e.showDetail(t.row)}},null,8,["onClick"]),Object(o["createVNode"])(v,{icon:"Edit",type:"primary",onClick:function(r){return e.handleEdit(t.row)}},null,8,["onClick"]),Object(o["createVNode"])(_,{title:"确认删除？",onConfirm:function(r){return e.handleDelete(t.row.id)}},{reference:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{icon:"Delete",type:"danger"})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"])),[[F,e.loading]]),Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(z,{currentPage:e.currentPage,"onUpdate:currentPage":t[1]||(t[1]=function(t){return e.currentPage=t}),"page-size":e.pageSize,"page-sizes":[10,20],total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(R,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.dialogVisible=t}),title:"操作",width:"30%",onClose:e.cancel},{footer:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",m,[Object(o["createVNode"])(v,{onClick:e.cancel},{default:Object(o["withCtx"])((function(){return[f]})),_:1},8,["onClick"]),Object(o["createVNode"])(v,{type:"primary",onClick:e.save},{default:Object(o["withCtx"])((function(){return[p]})),_:1},8,["onClick"])])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(I,{ref:"form",model:e.form,rules:e.rules,"label-width":"120px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(S,{label:"标题",prop:"title",style:{"margin-bottom":"27px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.title=t}),clearable:"",style:{width:"80%"}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(S,{label:"楼宇号",prop:"dormBuildId",style:{"margin-bottom":"27px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{modelValue:e.form.dormBuildId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.dormBuildId=t}),clearable:"",style:{width:"50%"}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(S,{label:"房间号",prop:"dormRoomId",style:{"margin-bottom":"27px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{modelValue:e.form.dormRoomId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.dormRoomId=t}),clearable:"",style:{width:"50%"}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(S,{label:"申请人",prop:"repairer"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{modelValue:e.form.repairer,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.repairer=t}),clearable:"",style:{width:"50%"}},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(S,{label:"内容",prop:"content"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(N,{modelValue:e.form.content,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.content=t}),autosize:{minRows:3,maxRows:10},clearable:"",style:{width:"80%"},type:"textarea"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(S,{style:Object(o["normalizeStyle"])(e.finishTime),label:"订单状态",prop:"state"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(E,{modelValue:e.form.state,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.state=t}),label:"完成"},{default:Object(o["withCtx"])((function(){return[s]})),_:1},8,["modelValue"]),Object(o["createVNode"])(E,{modelValue:e.form.state,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.state=t}),label:"未完成"},{default:Object(o["withCtx"])((function(){return[b]})),_:1},8,["modelValue"])]})),_:1},8,["style"]),Object(o["createVNode"])(S,{label:"订单创建时间",prop:"orderBuildTime",style:{"margin-top":"27px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(B,{modelValue:e.form.orderBuildTime,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.orderBuildTime=t}),disabled:e.buildTimeDisabled,clearable:"",placeholder:"选择时间",style:{width:"48%"},type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","disabled"])]})),_:1}),Object(o["createVNode"])(S,{style:Object(o["normalizeStyle"])([e.finishTime,{"margin-top":"27px"}]),label:"订单完成时间",prop:"orderFinishTime"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(B,{modelValue:e.form.orderFinishTime,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.orderFinishTime=t}),clearable:"",placeholder:"选择时间",style:{width:"48%"},type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]})),_:1},8,["style"])]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClose"]),Object(o["createVNode"])(R,{modelValue:e.detailDialog,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.detailDialog=t}),title:"详情",width:"30%"},{footer:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("span",j,[Object(o["createVNode"])(v,{type:"primary",onClick:e.closeDetails},{default:Object(o["withCtx"])((function(){return[O]})),_:1},8,["onClick"])])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(U,null,{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{innerHTML:e.detail.content},null,8,h)]})),_:1})]})),_:1},8,["modelValue"])])])]})),_:1})])}var V=r("1da1"),x=(r("96cf"),r("d9e2"),r("e9c4"),r("b775")),C=r("1f77"),w=C.ElMessage,N={name:"RepairInfo",components:{},data:function(){var e=this,t=function(t,r,o){e.judge?"未完成"===r&&null===e.form.orderFinishTime||"完成"===r&&null!==e.form.orderFinishTime?o():o(new Error("请检查订单完成状态与选择时间是否匹配")):o()};return{buildTimeDisabled:!0,loading:!0,disabled:!1,judge:!1,dialogVisible:!1,detailDialog:!1,search:"",currentPage:1,pageSize:10,total:0,tableData:[],detail:{},form:{},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],repairer:[{required:!0,message:"请输入申请人",trigger:"blur"}],orderBuildTime:[{required:!0,message:"请选择时间",trigger:"blur"}],state:[{validator:t,trigger:"blur"}]},finishTime:{display:"none"}}},created:function(){var e=this;this.load(),this.loading=!0,setTimeout((function(){e.loading=!1}),1e3)},methods:{load:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:x["a"].get("/repair/find",{params:{pageNum:e.currentPage,pageSize:e.pageSize,search:e.search}}).then((function(t){console.log(t),e.tableData=t.data.records,e.total=t.data.total,e.loading=!1}));case 1:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;this.search="",x["a"].get("/repair/find",{params:{pageNum:1,pageSize:this.pageSize,search:this.search}}).then((function(t){console.log(t),e.tableData=t.data.records,e.total=t.data.total,e.loading=!1}))},filterTag:function(e,t){return t.state===e},showDetail:function(e){var t=this;this.detailDialog=!0,this.$nextTick((function(){t.detail=e}))},closeDetails:function(){this.detailDialog=!1},add:function(){var e=this;this.dialogVisible=!0,this.$nextTick((function(){e.$refs.form.resetFields(),e.buildTimeDisabled=!1,e.finishTime={display:"none"},e.disabled=!1,e.form={},e.judge=!1}))},save:function(){var e=this;this.$refs.form.validate(function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}if(!1!==e.judge){t.next=6;break}return t.next=4,x["a"].post("/repair/add",e.form).then((function(t){console.log(t),"0"===t.code?(w({message:"新增成功",type:"success"}),e.search="",e.load(),e.dialogVisible=!1):w({message:t.msg,type:"error"})}));case 4:t.next=8;break;case 6:return t.next=8,x["a"].put("/repair/update",e.form).then((function(t){console.log(t),"0"===t.code?(w({message:"修改成功",type:"success"}),e.search="",e.load(),e.dialogVisible=!1):w({message:t.msg,type:"error"})}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.$refs.form.resetFields(),this.dialogVisible=!1},handleEdit:function(e){var t=this;this.judge=!0,this.dialogVisible=!0,this.$nextTick((function(){t.$refs.form.resetFields(),t.form=JSON.parse(JSON.stringify(e)),t.disabled=!0,t.buildTimeDisabled=!0,t.finishTime={display:"flex"}}))},handleDelete:function(e){var t=this;console.log(e),x["a"].delete("/repair/delete/"+e).then((function(e){"0"===e.code?(w({message:"删除成功",type:"success"}),t.search="",t.load()):w({message:e.msg,type:"error"})}))},handleSizeChange:function(e){this.pageSize=e,this.load()},handleCurrentChange:function(e){this.currentPage=e,this.load()}}},v=r("d959"),y=r.n(v);const T=y()(N,[["render",g]]);t["default"]=T},"841c":function(e,t,r){"use strict";var o=r("c65b"),a=r("d784"),n=r("825a"),l=r("1d80"),i=r("129f"),c=r("577e"),d=r("dc4a"),u=r("14c3");a("search",(function(e,t,r){return[function(t){var r=l(this),a=void 0==t?void 0:d(t,e);return a?o(a,t,r):new RegExp(t)[e](c(r))},function(e){var o=n(this),a=c(e),l=r(t,o,a);if(l.done)return l.value;var d=o.lastIndex;i(d,0)||(o.lastIndex=0);var s=u(o,a);return i(o.lastIndex,d)||(o.lastIndex=d),null===s?-1:s.index}]}))}}]);
//# sourceMappingURL=chunk-f27f5ea4.a0ae198c.js.map